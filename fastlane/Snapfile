# frozen_string_literal: true

# Snapfile - fastlane snapshot configuration
# Reference: https://docs.fastlane.tools/actions/snapshot/

# Xcode project and scheme
project "W8Trackr.xcodeproj"
scheme "W8TrackrUITests"

# Device types for App Store screenshots (2026 mandatory sizes)
# 6.9" display - iPhone 16 Pro Max (1320 x 2868 px) - MANDATORY
# 6.5" display - iPhone 14 Plus (1284 x 2778 px) - Fallback option
# 13" display - iPad Pro 13-inch M4 (2064 x 2752 px) - MANDATORY for iPad
devices([
  "iPhone 16 Pro Max",
  "iPhone 14 Plus",
  "iPad Pro 13-inch (M4)"
])

# Languages to capture (App Store requires at least en-US)
languages([
  "en-US"
])

# Screenshot output configuration
output_directory "./fastlane/screenshots"
clear_previous_screenshots true

# Stop on first error during testing
stop_after_first_error true

# Override status bar to show clean state (iOS 17+)
override_status_bar true
override_status_bar_arguments "--time 9:41 --batteryState charged --batteryLevel 100 --cellularMode active --cellularBars 4"

# Launch arguments to pass to the app during screenshots
launch_arguments(["-FASTLANE_SNAPSHOT", "YES", "-AppleLanguages", "(en-US)"])

# Concurrent simulators (adjust based on machine capability)
concurrent_simulators true

# Clean build before capturing
clean true

# Erase simulator before running (ensures clean state)
erase_simulator true

# Disable slide to type for more consistent input
disable_slide_to_type true

# Test without building (if build already done)
# test_without_building true
