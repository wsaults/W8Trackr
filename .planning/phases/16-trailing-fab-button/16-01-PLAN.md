---
phase: 16-trailing-fab-button
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - W8Trackr/Views/ContentView.swift
autonomous: true

must_haves:
  truths:
    - "Add button appears in bottom-right corner of screen (trailing position)"
    - "Button uses Liquid Glass styling with interactive touch feedback"
    - "Tab bar still minimizes when scrolling content"
    - "Tapping button opens weight entry sheet"
    - "Button has proper accessibility label and hint"
  artifacts:
    - path: "W8Trackr/Views/ContentView.swift"
      provides: "Trailing FAB with ZStack layout"
      contains: "ZStack(alignment: .bottomTrailing)"
  key_links:
    - from: "ContentView.swift (FAB button)"
      to: "showAddWeightView binding"
      via: "Button action sets true"
      pattern: "showAddWeightView = true"
    - from: "ContentView.swift (FAB)"
      to: "Liquid Glass system"
      via: "glassEffect modifier"
      pattern: "\\.glassEffect\\(.regular.interactive\\(\\)\\)"
---

<objective>
Reposition the add entry button from centered above the tab bar to the trailing (right) side of the tab bar, matching the Reminders app pattern.

Purpose: The iOS 26 `.tabViewBottomAccessory` centers content above the tab bar. For a trailing FAB like Reminders, we need a ZStack overlay approach with Liquid Glass styling.

Output: ContentView with trailing-positioned FAB using `.glassEffect(.regular.interactive())`
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/16-trailing-fab-button/16-RESEARCH.md

# Current implementation
@W8Trackr/Views/ContentView.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace tabViewBottomAccessory with ZStack overlay</name>
  <files>W8Trackr/Views/ContentView.swift</files>
  <action>
Refactor ContentView to use ZStack overlay for trailing FAB positioning:

1. Wrap the entire TabView in `ZStack(alignment: .bottomTrailing)`

2. Remove the `.tabViewBottomAccessory { }` modifier entirely

3. Extract the FAB button as a computed property `addButton`:
```swift
private var addButton: some View {
    Button {
        showAddWeightView = true
    } label: {
        Image(systemName: "plus")
            .font(.title2)
            .fontWeight(.semibold)
            .foregroundStyle(.white)
            .frame(width: 50, height: 50)
    }
    .glassEffect(.regular.interactive())
    .accessibilityLabel("Add weight entry")
    .accessibilityHint("Opens form to log a new weight measurement")
}
```

4. Add the FAB inside ZStack after TabView with padding:
```swift
addButton
    .padding([.bottom, .trailing], 12)
```

5. Keep `.tabBarMinimizeBehavior(.onScrollDown)` on TabView

6. Keep `.sheet(isPresented: $showAddWeightView)` - can remain on TabView or move to ZStack

Structure should be:
```swift
ZStack(alignment: .bottomTrailing) {
    TabView {
        // tabs...
    }
    .tabBarMinimizeBehavior(.onScrollDown)
    .sheet(...)
    .onAppear(...)
    .toast(...)
    .toast(...)

    addButton
        .padding([.bottom, .trailing], 12)
}
```

Key details:
- Use `.glassEffect(.regular.interactive())` (not plain `.glassEffect()`) for touch feedback
- Use `.foregroundStyle(.white)` for visibility on glass background
- Frame of 50x50 with .title2 font matches tab bar sizing
- 12pt padding provides visual breathing room from edges
  </action>
  <verify>
Build succeeds: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build 2>&1 | tail -20`
  </verify>
  <done>
ContentView uses ZStack layout with trailing FAB. No `.tabViewBottomAccessory` remains. FAB has `.glassEffect(.regular.interactive())` modifier.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Visual verification of trailing FAB</name>
  <what-built>Trailing FAB button positioned to the right of the tab bar with Liquid Glass styling</what-built>
  <how-to-verify>
1. Run app in Simulator (iOS 26+)
2. Verify FAB button appears in bottom-right corner (trailing side)
3. Verify button has Liquid Glass translucent appearance
4. Tap button - confirm WeightEntryView sheet opens
5. Scroll dashboard content - verify tab bar minimizes on scroll
6. When tab bar is minimized, verify FAB is still visible and tappable
7. Enable VoiceOver - verify "Add weight entry" is announced
  </how-to-verify>
  <resume-signal>Type "approved" if FAB positioning, styling, and behavior are correct, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
1. Build passes with no errors
2. No `.tabViewBottomAccessory` usage in ContentView
3. FAB uses `.glassEffect(.regular.interactive())`
4. Accessibility modifiers preserved
</verification>

<success_criteria>
- Add button appears in trailing (right) position near tab bar
- Button has Liquid Glass appearance with interactive touch feedback
- Tab bar minimize behavior still works
- Button action opens weight entry sheet
- Accessibility labels and hints intact
</success_criteria>

<output>
After completion, create `.planning/phases/16-trailing-fab-button/16-01-SUMMARY.md`
</output>
