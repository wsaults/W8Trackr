---
phase: 20-full-accessibility-support
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - W8Trackr/Views/Components/GoalReachedBannerView.swift
  - W8Trackr/Views/Components/GoalPredictionView.swift
  - W8Trackr/Views/WeightEntryView.swift
  - W8Trackr/Views/Onboarding/WelcomeStepView.swift
  - W8Trackr/Views/Onboarding/UnitPreferenceStepView.swift
  - W8Trackr/Views/Onboarding/FeatureTourStepView.swift
  - W8Trackr/Views/Onboarding/GoalStepView.swift
  - W8Trackr/Views/Onboarding/FirstWeightStepView.swift
  - W8Trackr/Views/Onboarding/CompletionStepView.swift
  - W8Trackr/Views/LogbookView.swift
  - W8Trackr/Views/Components/LogbookHeaderView.swift
autonomous: true

must_haves:
  truths:
    - "All interactive elements have VoiceOver labels that describe their purpose"
    - "All interactive elements have VoiceOver hints that explain their action"
    - "Date navigation arrows in WeightEntryView are properly labeled"
    - "Goal reached banner is announced to VoiceOver users"
    - "Onboarding steps have proper accessibility labels"
    - "Touch targets meet 44pt minimum"
  artifacts:
    - path: "W8Trackr/Views/Components/GoalReachedBannerView.swift"
      provides: "VoiceOver-accessible goal reached banner"
      contains: "accessibilityLabel"
    - path: "W8Trackr/Views/WeightEntryView.swift"
      provides: "Accessible date navigation"
      contains: "accessibilityLabel"
    - path: "W8Trackr/Views/Onboarding/WelcomeStepView.swift"
      provides: "Accessible onboarding welcome"
      contains: "accessibilityLabel"
  key_links:
    - from: "GoalReachedBannerView"
      to: "VoiceOver announcement"
      via: "accessibilityElement + accessibilityLabel"
      pattern: "\\.accessibilityLabel"
---

<objective>
Add VoiceOver labels and hints to views missing accessibility attributes, and ensure touch targets meet 44pt minimum.

Purpose: VoiceOver users need descriptive labels to understand UI elements. Without proper labels, VoiceOver may read unintelligible text or skip elements entirely. Touch targets below 44pt are difficult for users with motor impairments.

Output: All interactive elements have proper VoiceOver labels and hints. Touch targets meet iOS accessibility guidelines.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/20-full-accessibility-support/20-RESEARCH.md
@W8Trackr/Views/Components/GoalReachedBannerView.swift
@W8Trackr/Views/Components/GoalPredictionView.swift
@W8Trackr/Views/WeightEntryView.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add VoiceOver labels to Dashboard components</name>
  <files>
    W8Trackr/Views/Components/GoalReachedBannerView.swift
    W8Trackr/Views/Components/GoalPredictionView.swift
  </files>
  <action>
Add accessibility labels to dashboard components that currently lack them:

**GoalReachedBannerView.swift:**
1. Add `.accessibilityElement(children: .combine)` to the outer HStack
2. Add `.accessibilityLabel("Goal reached! Congratulations on reaching your target weight!")`
3. No hint needed (banner is informational, not interactive)

**GoalPredictionView.swift:**
1. Read the file first to understand its current structure
2. Add `.accessibilityElement(children: .combine)` to the main container
3. Add `.accessibilityLabel()` that describes the prediction:
   - If prediction exists: "Goal prediction: You're on track to reach your goal of [X] [unit] by [date], losing [Y] [unit] per week"
   - If no prediction/gaining: "Goal prediction: At current rate, goal date cannot be predicted"
   - If at goal: "You've reached your goal weight!"
4. Consider adding dynamic accessibility label using a computed property similar to HeroCardView pattern

Pattern to follow (from HeroCardView):
```swift
private var accessibilityDescription: String {
    // Build contextual description
}

.accessibilityElement(children: .combine)
.accessibilityLabel(accessibilityDescription)
```
  </action>
  <verify>
Build succeeds: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build`
Grep confirms accessibility labels: `grep -l "accessibilityLabel" W8Trackr/Views/Components/GoalReachedBannerView.swift W8Trackr/Views/Components/GoalPredictionView.swift`
  </verify>
  <done>
GoalReachedBannerView and GoalPredictionView have VoiceOver labels that describe their content clearly to screen reader users.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add VoiceOver labels to WeightEntryView and touch target sizing</name>
  <files>
    W8Trackr/Views/WeightEntryView.swift
    W8Trackr/Views/Components/LogbookHeaderView.swift
    W8Trackr/Views/LogbookView.swift
  </files>
  <action>
Add accessibility labels to WeightEntryView date navigation and ensure touch targets:

**WeightEntryView.swift:**
1. For the left chevron button (previous day):
   - Add `.accessibilityLabel("Previous day")`
   - Add `.accessibilityHint("Navigate to previous day for entry")`
2. For the right chevron button (next day):
   - Add `.accessibilityLabel("Next day")`
   - Add `.accessibilityHint("Navigate to next day for entry")`
   - VoiceOver will automatically announce disabled state
3. For the date display Text between arrows:
   - Add `.accessibilityLabel("Selected date: [date]")`
   - Or wrap the HStack: `.accessibilityElement(children: .combine)` with combined label
4. For "More..." / "Less..." button:
   - Add `.accessibilityLabel(showMoreFields ? "Show less options" : "Show more options")`
   - Add `.accessibilityHint("Toggles body fat percentage field")`
5. Ensure all buttons have `frame(minWidth: 44, minHeight: 44)` for touch targets

**LogbookHeaderView.swift:**
1. Add `.accessibilityHidden(true)` to the header row since column labels are decorative
2. The actual data is in LogbookRowView which already has accessibility labels

**LogbookView.swift:**
1. Read file to check for any interactive elements missing labels
2. Ensure filter button has proper label if not already present
  </action>
  <verify>
Build succeeds: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build`
Grep confirms accessibility labels in WeightEntryView: `grep "accessibilityLabel\|accessibilityHint" W8Trackr/Views/WeightEntryView.swift`
  </verify>
  <done>
WeightEntryView date navigation arrows and More/Less button have VoiceOver labels and hints. Touch targets meet 44pt minimum. LogbookHeaderView is hidden from VoiceOver (data in rows is already accessible).
  </done>
</task>

<task type="auto">
  <name>Task 3: Add VoiceOver labels to Onboarding steps</name>
  <files>
    W8Trackr/Views/Onboarding/WelcomeStepView.swift
    W8Trackr/Views/Onboarding/UnitPreferenceStepView.swift
    W8Trackr/Views/Onboarding/FeatureTourStepView.swift
    W8Trackr/Views/Onboarding/GoalStepView.swift
    W8Trackr/Views/Onboarding/FirstWeightStepView.swift
    W8Trackr/Views/Onboarding/CompletionStepView.swift
  </files>
  <action>
Add accessibility labels to onboarding flow:

**WelcomeStepView.swift:**
1. Add `.accessibilityLabel()` to the main VStack describing the welcome screen
2. Ensure "Get Started" button has label (Button with title should auto-label)
3. Add `.accessibilityHint("Begin setting up your weight tracking")` to Get Started button

**UnitPreferenceStepView.swift:**
1. Segmented picker should auto-label with "Weight Unit"
2. Add `.accessibilityHint("Choose pounds or kilograms for weight display")` to the picker
3. Ensure Continue button has hint

**FeatureTourStepView.swift:**
1. Add `.accessibilityLabel()` to feature cards describing each feature
2. Or use `.accessibilityElement(children: .combine)` on each feature item

**GoalStepView.swift:**
1. Add accessibility label to the weight text field
2. Add `.accessibilityLabel("Goal weight")` if not already present
3. Add `.accessibilityHint("Enter your target weight")` to the TextField

**FirstWeightStepView.swift:**
1. Add accessibility label to the weight text field
2. Add `.accessibilityLabel("Current weight")`
3. Add `.accessibilityHint("Enter your starting weight")`

**CompletionStepView.swift:**
1. Add `.accessibilityLabel()` to the completion message
2. Ensure "Let's Go!" button has proper label and hint

For all Continue/Action buttons:
- Verify they have sufficient touch target (44pt minimum)
- Add `.accessibilityHint()` describing what happens next

Pattern:
```swift
Button("Continue") { onContinue() }
    .accessibilityHint("Proceed to next step")
```
  </action>
  <verify>
Build succeeds: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build`
Grep confirms accessibility in onboarding files: `grep -l "accessibilityLabel\|accessibilityHint" W8Trackr/Views/Onboarding/*.swift`
SwiftLint passes: `swiftlint lint --quiet`
  </verify>
  <done>
All onboarding steps have proper VoiceOver labels and hints. Users can navigate the entire onboarding flow with VoiceOver enabled.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Build succeeds without warnings
2. All files have accessibility modifiers:
   - GoalReachedBannerView.swift - accessibilityLabel
   - GoalPredictionView.swift - accessibilityLabel
   - WeightEntryView.swift - accessibilityLabel, accessibilityHint on date nav
   - All 6 onboarding step files - accessibilityLabel or accessibilityHint
3. Touch targets meet 44pt minimum on interactive elements
4. SwiftLint passes
</verification>

<success_criteria>
1. VoiceOver users can understand all dashboard components (goal banner, prediction)
2. VoiceOver users can navigate date selection in WeightEntryView
3. VoiceOver users can complete entire onboarding flow
4. All interactive buttons have 44pt minimum touch target
5. Build compiles without errors
6. SwiftLint passes
</success_criteria>

<output>
After completion, create `.planning/phases/20-full-accessibility-support/20-02-SUMMARY.md`
</output>
