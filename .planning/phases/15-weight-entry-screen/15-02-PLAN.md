---
phase: 15-weight-entry-screen
plan: 02
type: execute
wave: 2
depends_on: ["15-01"]
files_modified:
  - W8Trackr/Views/Onboarding/FirstWeightStepView.swift
  - W8Trackr/Views/Components/WeightAdjustmentButton.swift
autonomous: true

must_haves:
  truths:
    - "FirstWeightStepView uses direct text input (no plus/minus buttons)"
    - "WeightAdjustmentButton component is deleted from codebase"
    - "Onboarding flow works with new text-based weight entry"
  artifacts:
    - path: "W8Trackr/Views/Onboarding/FirstWeightStepView.swift"
      provides: "Updated onboarding weight entry"
      contains: "TextField"
  key_links:
    - from: "FirstWeightStepView"
      to: "WeightUnit"
      via: "weight validation"
      pattern: "weightUnit.isValidWeight"
---

<objective>
Update FirstWeightStepView to use direct text input and delete the now-unused WeightAdjustmentButton component.

Purpose: Complete the text input migration by updating onboarding and removing deprecated component
Output: Simplified FirstWeightStepView.swift, deleted WeightAdjustmentButton.swift
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-weight-entry-screen/15-01-SUMMARY.md

# Source files
@W8Trackr/Views/Onboarding/FirstWeightStepView.swift
@W8Trackr/Views/Components/WeightAdjustmentButton.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update FirstWeightStepView to use text input only</name>
  <files>W8Trackr/Views/Onboarding/FirstWeightStepView.swift</files>
  <action>
Simplify FirstWeightStepView by removing WeightAdjustmentButton usage:

**Remove:**
- The HStack containing 4 WeightAdjustmentButton components (lines 60-80)
- UIImpactFeedbackGenerator instances (lightFeedbackGenerator, mediumFeedbackGenerator)

**Keep the existing:**
- TextField for weight input (already exists, lines 47-57)
- Weight validation logic (isValidWeight)
- Animation logic for entrance (showContent, animateEntrance)
- Continue button with validation

**Result structure:**
```swift
struct FirstWeightStepView: View {
    var weightUnit: WeightUnit
    @Binding var enteredWeight: Double
    var onContinue: () -> Void

    @State private var showContent = false
    @ScaledMetric(relativeTo: .largeTitle) private var weightFontSize: CGFloat = 64

    private var isValidWeight: Bool {
        weightUnit.isValidWeight(enteredWeight)
    }

    var body: some View {
        VStack(spacing: 30) {
            Spacer()

            VStack(spacing: 12) {
                Text("Your Current Weight")
                    .font(.largeTitle)
                    .fontWeight(.bold)

                Text("Let's log your starting point")
                    .font(.title3)
                    .foregroundStyle(.secondary)
            }
            .offset(y: showContent ? 0 : 20)
            .opacity(showContent ? 1.0 : 0.0)

            Spacer()
                .frame(height: 20)

            // Weight input (text field only, no adjustment buttons)
            HStack(alignment: .firstTextBaseline, spacing: 4) {
                TextField("Weight", value: $enteredWeight, format: .number.precision(.fractionLength(1)))
                    .font(.system(size: weightFontSize, weight: .medium))
                    .keyboardType(.decimalPad)
                    .fixedSize()
                    .multilineTextAlignment(.trailing)
                    .foregroundStyle(isValidWeight ? Color.primary : Color.red)

                Text(weightUnit.rawValue)
                    .font(.title)
                    .foregroundStyle(.secondary)
            }
            .scaleEffect(showContent ? 1.0 : 0.95)
            .opacity(showContent ? 1.0 : 0.0)

            Spacer()

            Button(action: onContinue) {
                Text("Continue")
                    .fontWeight(.semibold)
                    .frame(maxWidth: .infinity)
                    .padding()
                    .background(isValidWeight ? AppColors.primary : AppColors.surfaceSecondary)
                    .foregroundStyle(.white)
                    .clipShape(RoundedRectangle(cornerRadius: 14))
            }
            .disabled(!isValidWeight)
            .padding(.horizontal, 30)
            .opacity(showContent ? 1.0 : 0.0)

            Spacer()
                .frame(height: 60)
        }
        .onAppear {
            if enteredWeight == 0 {
                enteredWeight = weightUnit.defaultWeight
            }
            animateEntrance()
        }
    }

    private func animateEntrance() {
        withAnimation(.spring(response: 0.5, dampingFraction: 0.8).delay(0.2)) {
            showContent = true
        }
    }
}
```

The view becomes simpler - just the text field for direct entry, matching the new WeightEntryView pattern.
  </action>
  <verify>
Build succeeds: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build 2>&1 | grep -E "(error:|BUILD SUCCEEDED)"`
  </verify>
  <done>
- FirstWeightStepView builds without WeightAdjustmentButton
- No UIImpactFeedbackGenerator in the file
- TextField remains for weight input
- Animation and validation logic preserved
  </done>
</task>

<task type="auto">
  <name>Task 2: Delete WeightAdjustmentButton component</name>
  <files>W8Trackr/Views/Components/WeightAdjustmentButton.swift</files>
  <action>
Delete the file `W8Trackr/Views/Components/WeightAdjustmentButton.swift`

This component is no longer used anywhere in the codebase after:
1. WeightEntryView (Plan 01) removed its usage
2. FirstWeightStepView (Task 1 above) removed its usage

Use `rm` to delete the file:
```bash
rm W8Trackr/Views/Components/WeightAdjustmentButton.swift
```
  </action>
  <verify>
File no longer exists: `ls W8Trackr/Views/Components/WeightAdjustmentButton.swift 2>&1 | grep -q "No such file" && echo "Deleted successfully"`
Build still succeeds (no dangling references)
  </verify>
  <done>
- WeightAdjustmentButton.swift deleted from codebase
- No build errors from missing file
- No other files reference WeightAdjustmentButton
  </done>
</task>

</tasks>

<verification>
- Build succeeds with both changes
- `grep -r "WeightAdjustmentButton" W8Trackr/` returns no results
- FirstWeightStepView works with text-only input
- Onboarding flow completes successfully
</verification>

<success_criteria>
- FirstWeightStepView simplified to text-only weight input
- WeightAdjustmentButton.swift deleted from project
- No references to WeightAdjustmentButton anywhere in codebase
- Onboarding still functions correctly
</success_criteria>

<output>
After completion, create `.planning/phases/15-weight-entry-screen/15-02-SUMMARY.md`
</output>
