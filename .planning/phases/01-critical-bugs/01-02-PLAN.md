---
phase: 01-critical-bugs
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - W8Trackr/Services/MilestoneTracker.swift
  - W8Trackr/Services/GoalProgressCalculator.swift
  - W8Trackr/Models/MilestoneType.swift
  - W8Trackr/Models/MilestoneAchievement.swift
  - W8Trackr/W8TrackrApp.swift
autonomous: true

must_haves:
  truths:
    - "App contains no fatalError stubs that could crash at runtime"
    - "No unused service files remain in codebase"
    - "App builds and runs without the removed files"
  artifacts:
    - path: "W8Trackr/Services/MilestoneTracker.swift"
      provides: "FILE SHOULD NOT EXIST"
      deleted: true
    - path: "W8Trackr/Services/GoalProgressCalculator.swift"
      provides: "FILE SHOULD NOT EXIST"
      deleted: true
  key_links:
    - from: "W8TrackrApp.swift"
      to: "modelContainer"
      via: "MilestoneAchievement removed from container"
      pattern: "modelContainer.*for.*WeightEntry.*CompletedMilestone"
---

<objective>
Remove fatalError stub services and related unused code to eliminate crash risks

Purpose: The MilestoneTracker and GoalProgressCalculator services contain fatalError("Not implemented") stubs that could crash the app if accidentally called. They are completely unused - the working milestone logic lives in MilestoneCalculator enum. Remove these dangerous dead code files.

Output: Clean codebase with no fatalError stubs, no unused milestone service infrastructure.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@W8Trackr/Services/MilestoneTracker.swift
@W8Trackr/Services/GoalProgressCalculator.swift
@W8Trackr/Models/MilestoneType.swift
@W8Trackr/Models/MilestoneAchievement.swift
@W8Trackr/W8TrackrApp.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify no code uses the stub services</name>
  <files>N/A - verification only</files>
  <action>
Search the W8Trackr source directory (NOT specs/) for any usages of:
- `MilestoneTracker.` (method calls)
- `GoalProgressCalculator(` (instantiation)
- Any @Query for MilestoneAchievement

Commands to run:
```bash
grep -r "MilestoneTracker\." W8Trackr/ --include="*.swift" | grep -v "MilestoneTracker.swift"
grep -r "GoalProgressCalculator(" W8Trackr/ --include="*.swift" | grep -v "GoalProgressCalculator.swift"
grep -r "@Query.*MilestoneAchievement" W8Trackr/ --include="*.swift"
```

Expected: No results (services are unused).

If any usages found, STOP and report - do not delete files that are in use.
  </action>
  <verify>All grep commands return empty results</verify>
  <done>Confirmed: MilestoneTracker, GoalProgressCalculator, and MilestoneAchievement are not used in app code</done>
</task>

<task type="auto">
  <name>Task 2: Remove stub service files and unused models</name>
  <files>
W8Trackr/Services/MilestoneTracker.swift
W8Trackr/Services/GoalProgressCalculator.swift
W8Trackr/Models/MilestoneType.swift
W8Trackr/Models/MilestoneAchievement.swift
  </files>
  <action>
Delete the following files (they contain fatalError stubs and are unused):

1. `W8Trackr/Services/MilestoneTracker.swift` - All methods have fatalError("Not implemented")
2. `W8Trackr/Services/GoalProgressCalculator.swift` - calculateProgress and milestonesReached have fatalError

Also delete their supporting models (only used by the stub services):
3. `W8Trackr/Models/MilestoneType.swift` - Only used by MilestoneTracker/GoalProgressCalculator
4. `W8Trackr/Models/MilestoneAchievement.swift` - Only used by MilestoneTracker (SwiftData model but never queried)

Use `rm` to delete each file.

After deletion, remove from Xcode project if needed (try build first - Xcode may auto-remove missing files from build).
  </action>
  <verify>Files no longer exist: `ls W8Trackr/Services/MilestoneTracker.swift W8Trackr/Services/GoalProgressCalculator.swift W8Trackr/Models/MilestoneType.swift W8Trackr/Models/MilestoneAchievement.swift 2>&1` should show "No such file"</verify>
  <done>All four stub/unused files deleted from filesystem</done>
</task>

<task type="auto">
  <name>Task 3: Update model container registration</name>
  <files>W8Trackr/W8TrackrApp.swift</files>
  <action>
Edit W8TrackrApp.swift to remove MilestoneAchievement from the model container.

Current line (around line 32):
```swift
.modelContainer(for: [WeightEntry.self, CompletedMilestone.self, MilestoneAchievement.self])
```

Change to:
```swift
.modelContainer(for: [WeightEntry.self, CompletedMilestone.self])
```

This prevents SwiftData from trying to use the deleted model.

Note: This is a breaking migration for existing users with MilestoneAchievement records, but since that model was never actually populated (all methods that would create records are fatalError stubs), there are no records to lose.
  </action>
  <verify>Build succeeds: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build 2>&1 | tail -20`</verify>
  <done>MilestoneAchievement removed from SwiftData model container, build passes</done>
</task>

</tasks>

<verification>
1. `grep -r "fatalError" W8Trackr/ --include="*.swift"` returns no results (or only legitimate crash handlers)
2. Build succeeds with no missing file errors
3. Run tests: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -sdk iphonesimulator test 2>&1 | tail -50`
4. App launches in simulator without crash
</verification>

<success_criteria>
- MilestoneTracker.swift deleted
- GoalProgressCalculator.swift deleted
- MilestoneType.swift deleted
- MilestoneAchievement.swift deleted
- W8TrackrApp model container updated (MilestoneAchievement removed)
- Build passes
- No fatalError stubs remain in codebase (grep confirms)
- App runs without crash
</success_criteria>

<output>
After completion, create `.planning/phases/01-critical-bugs/01-02-SUMMARY.md`
</output>
