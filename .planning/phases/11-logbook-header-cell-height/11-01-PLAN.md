---
phase: 11-logbook-header-cell-height
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - W8Trackr/Views/Components/LogbookHeaderView.swift
  - W8Trackr/Views/Components/LogbookRowView.swift
  - W8Trackr/Views/HistorySectionView.swift
autonomous: true

must_haves:
  truths:
    - "Column headers appear above logbook entries indicating what each column represents"
    - "Headers remain visible when scrolling through entries (fixed at top)"
    - "More entries visible on screen due to reduced row height"
    - "Touch targets remain accessible (44pt minimum height)"
  artifacts:
    - path: "W8Trackr/Views/Components/LogbookHeaderView.swift"
      provides: "Fixed column header row component"
      exports: ["LogbookHeaderView"]
    - path: "W8Trackr/Views/Components/LogbookRowView.swift"
      provides: "Compact row with reduced padding"
      contains: ".padding(.vertical, 4)"
    - path: "W8Trackr/Views/HistorySectionView.swift"
      provides: "VStack wrapper with header above List"
      contains: "LogbookHeaderView()"
  key_links:
    - from: "W8Trackr/Views/HistorySectionView.swift"
      to: "W8Trackr/Views/Components/LogbookHeaderView.swift"
      via: "VStack composition"
      pattern: "VStack.*LogbookHeaderView"
    - from: "W8Trackr/Views/Components/LogbookHeaderView.swift"
      to: "W8Trackr/Views/Components/LogbookRowView.swift"
      via: "matching HStack spacing (12pt)"
      pattern: "HStack\\(spacing: 12\\)"
---

<objective>
Add column headers to logbook and reduce row height for better data density

Purpose: Users need visual indicators of what each column represents (Date, Weight, Avg, Rate, Notes), and want to see more entries on screen without sacrificing readability.

Output:
- LogbookHeaderView.swift - Fixed column header component
- Updated LogbookRowView.swift - Reduced padding (8pt -> 4pt) with minHeight: 44
- Updated HistorySectionView.swift - VStack wrapper placing header above List
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-logbook-header-cell-height/11-RESEARCH.md

# Key files
@W8Trackr/Views/Components/LogbookRowView.swift
@W8Trackr/Views/HistorySectionView.swift
@W8Trackr/Theme/Colors.swift
@W8Trackr/Theme/AppTheme.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create LogbookHeaderView component</name>
  <files>W8Trackr/Views/Components/LogbookHeaderView.swift</files>
  <action>
Create a new LogbookHeaderView.swift in Views/Components/ that displays column labels:

1. Create struct LogbookHeaderView: View with body property
2. Use HStack(spacing: 12) to match LogbookRowView spacing exactly
3. Column layout (must match LogbookRowView columns):
   - "Date" label: .frame(width: 40, alignment: .leading) - matches dateColumn
   - Spacer()
   - "Weight" label
   - "Avg" label
   - "Rate" label
   - "Notes" label: .frame(width: 24) - matches notesIndicator approximate width

4. Styling:
   - .font(.caption) for all labels
   - .foregroundStyle(.secondary)
   - .padding(.horizontal) to align with List row content
   - .padding(.vertical, AppTheme.Spacing.xs) for comfortable spacing
   - .background(AppColors.background) to match app background

5. Add a subtle divider below the header:
   - Divider() after the HStack in a VStack(spacing: 0)

6. Add preview showing header above sample row for alignment verification
  </action>
  <verify>
Build succeeds: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build 2>&1 | grep -E "(error:|BUILD SUCCEEDED)"`
Preview renders without errors in Xcode
  </verify>
  <done>
LogbookHeaderView.swift exists with:
- HStack(spacing: 12) matching row spacing
- Date, Weight, Avg, Rate, Notes labels
- Secondary styling (.caption, .foregroundStyle(.secondary))
- Background matching app background
- Divider below header
  </done>
</task>

<task type="auto">
  <name>Task 2: Integrate header and reduce row height</name>
  <files>
    W8Trackr/Views/Components/LogbookRowView.swift
    W8Trackr/Views/HistorySectionView.swift
  </files>
  <action>
**LogbookRowView.swift changes:**

1. Change `.padding(.vertical, 8)` to `.padding(.vertical, 4)` (line 53)
2. Add `.frame(minHeight: 44)` after the padding to maintain accessibility touch target
3. Keep `.contentShape(Rectangle())` to ensure full area is tappable

Result should be:
```swift
.padding(.vertical, 4)
.frame(minHeight: 44)
.contentShape(Rectangle())
```

**HistorySectionView.swift changes:**

1. Import LogbookHeaderView (no import needed - same module)
2. Wrap the existing List in a VStack(spacing: 0)
3. Place LogbookHeaderView() above the List
4. Add .listStyle(.plain) to ensure sticky month section headers

Change the body from:
```swift
List {
    ForEach(sortedMonths, id: \.self) { month in
        ...
    }
}
```

To:
```swift
VStack(spacing: 0) {
    LogbookHeaderView()

    List {
        ForEach(sortedMonths, id: \.self) { month in
            ...
        }
    }
    .listStyle(.plain)
}
```

Note: The existing List does not have .listStyle set. Add .listStyle(.plain) to enable sticky month section headers.
  </action>
  <verify>
Build succeeds: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build 2>&1 | grep -E "(error:|BUILD SUCCEEDED)"`
Run tests: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -sdk iphonesimulator test 2>&1 | grep -E "(error:|Test Suite|passed|failed)"`
  </verify>
  <done>
- LogbookRowView has .padding(.vertical, 4) and .frame(minHeight: 44)
- HistorySectionView wraps List in VStack with LogbookHeaderView above
- List has .listStyle(.plain) for sticky section headers
- All tests pass
  </done>
</task>

</tasks>

<verification>
1. Build: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build`
2. Tests: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -sdk iphonesimulator test`
3. SwiftLint: `swiftlint --strict 2>&1 | grep -c "warning\|error"` (should be 0 or pre-existing count)
</verification>

<success_criteria>
1. Column headers (Date, Weight, Avg, Rate, Notes) visible above logbook entries
2. Headers remain fixed when scrolling (do not scroll away)
3. Month section headers (January 2026, etc.) still work as sticky headers within List
4. Rows are visually more compact but still easily tappable
5. All existing functionality preserved (swipe actions, edit, delete)
6. Build succeeds with no new warnings
7. All tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/11-logbook-header-cell-height/11-01-SUMMARY.md`
</output>
