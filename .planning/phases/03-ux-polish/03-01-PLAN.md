---
phase: 03-ux-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - W8Trackr/Views/Components/GoalReachedBannerView.swift
  - W8Trackr/Views/Dashboard/DashboardView.swift
  - W8Trackr/Views/LogbookView.swift
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Goal Reached banner appears at top of dashboard when user has reached their goal"
    - "Goal Reached banner is visible without scrolling"
    - "iCloud sync status indicator does not appear in dashboard toolbar"
    - "iCloud sync status indicator does not appear in logbook toolbar"
    - "iCloud sync status indicator still appears in Settings"
  artifacts:
    - path: "W8Trackr/Views/Components/GoalReachedBannerView.swift"
      provides: "Celebratory banner component for goal completion"
      min_lines: 30
    - path: "W8Trackr/Views/Dashboard/DashboardView.swift"
      provides: "Dashboard with banner at top, no sync toolbar"
      contains: "GoalReachedBannerView"
    - path: "W8Trackr/Views/LogbookView.swift"
      provides: "Logbook without sync status in toolbar"
  key_links:
    - from: "W8Trackr/Views/Dashboard/DashboardView.swift"
      to: "GoalReachedBannerView"
      via: "conditional rendering when status is atGoal"
      pattern: "goalPrediction\\.status.*==.*\\.atGoal"
---

<objective>
Improve dashboard layout by moving Goal Reached banner to top and consolidating sync status to Settings only.

Purpose: Users who reach their goal should see the celebration banner immediately (UX-01). Sync status clutters the UI when shown everywhere (UX-02).
Output: GoalReachedBannerView.swift, updated DashboardView.swift and LogbookView.swift
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-ux-polish/03-RESEARCH.md

# Relevant source files
@W8Trackr/Views/Dashboard/DashboardView.swift
@W8Trackr/Views/LogbookView.swift
@W8Trackr/Views/Components/GoalPredictionView.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create GoalReachedBannerView and add to dashboard top</name>
  <files>
    W8Trackr/Views/Components/GoalReachedBannerView.swift
    W8Trackr/Views/Dashboard/DashboardView.swift
  </files>
  <action>
Create new file `GoalReachedBannerView.swift` in Views/Components:
- Simple horizontal banner with checkmark icon and congratulations message
- Use green color scheme (match existing GoalPredictionView atGoal styling)
- Include padding and rounded corners for card appearance
- Keep it compact - not a full celebration, just a persistent indicator

```swift
struct GoalReachedBannerView: View {
    let prediction: GoalPrediction

    var body: some View {
        HStack(spacing: 12) {
            Image(systemName: "checkmark.circle.fill")
                .font(.title2)
                .foregroundStyle(.green)

            VStack(alignment: .leading, spacing: 2) {
                Text("Goal Reached!")
                    .font(.headline)
                Text("Congratulations on reaching your target weight!")
                    .font(.caption)
                    .foregroundStyle(.secondary)
            }

            Spacer()
        }
        .padding()
        .background(.green.opacity(0.1))
        .clipShape(RoundedRectangle(cornerRadius: 12))
        .padding(.horizontal)
    }
}
```

In DashboardView.swift `dashboardContent`:
1. Add conditional banner at TOP of VStack (before Hero Card):
```swift
// Goal Reached Banner (when at goal - shows at top for visibility)
if goalPrediction.status == .atGoal {
    GoalReachedBannerView(prediction: goalPrediction)
}
```

2. Modify the existing GoalPredictionView section to only show when NOT at goal:
```swift
// Goal Prediction (only when NOT at goal - banner shown at top instead)
if goalPrediction.status != .atGoal {
    GoalPredictionView(prediction: goalPrediction)
        .padding(.horizontal)
}
```

This ensures:
- At goal: Banner at top, no redundant prediction card at bottom
- Not at goal: No banner, prediction card shows as before
  </action>
  <verify>
Build succeeds: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build`
Preview "At Goal" state in GoalReachedBannerView shows green banner.
  </verify>
  <done>
GoalReachedBannerView exists. DashboardView shows banner at top when goalPrediction.status == .atGoal, and hides the bottom GoalPredictionView in that case.
  </done>
</task>

<task type="auto">
  <name>Task 2: Remove sync status from Dashboard and Logbook</name>
  <files>
    W8Trackr/Views/Dashboard/DashboardView.swift
    W8Trackr/Views/LogbookView.swift
  </files>
  <action>
In DashboardView.swift:
- Remove `.syncStatusToolbar()` modifier (currently line ~119)
- The NavigationStack should still have .navigationTitle and .navigationBarTitleDisplayMode but NO sync toolbar

In LogbookView.swift:
- Remove the ToolbarItem containing SyncStatusView (lines ~37-39):
```swift
// DELETE this entire ToolbarItem:
ToolbarItem(placement: .topBarLeading) {
    SyncStatusView()
}
```
- Keep the other ToolbarItem for the plus button

Note: Do NOT modify SettingsView.swift - it should retain its `.syncStatusToolbar()` modifier. This is the ONLY place sync status should appear.
  </action>
  <verify>
Build succeeds.
Grep confirms no SyncStatusView or syncStatusToolbar in DashboardView: `grep -n "sync" W8Trackr/Views/Dashboard/DashboardView.swift` returns nothing.
Grep confirms no SyncStatusView in LogbookView toolbar: `grep -n "SyncStatus" W8Trackr/Views/LogbookView.swift` returns nothing.
Grep confirms syncStatusToolbar remains in SettingsView: `grep -n "syncStatusToolbar" W8Trackr/Views/SettingsView.swift` returns a match.
  </verify>
  <done>
Sync status only appears in Settings. Dashboard and Logbook toolbars are clean.
  </done>
</task>

</tasks>

<verification>
1. Build succeeds with no errors
2. GoalReachedBannerView.swift exists in Views/Components
3. DashboardView shows conditional banner at top when at goal
4. No sync indicators in Dashboard or Logbook toolbars
5. Sync indicator remains in Settings only
</verification>

<success_criteria>
- UX-01: Goal Reached banner visible at top of dashboard without scrolling (when applicable)
- UX-02: iCloud sync status appears ONLY in Settings section
- Build passes, no regressions
</success_criteria>

<output>
After completion, create `.planning/phases/03-ux-polish/03-01-SUMMARY.md`
</output>
