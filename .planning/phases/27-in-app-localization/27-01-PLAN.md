---
phase: 27-in-app-localization
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - W8Trackr/Localizable.xcstrings
  - W8Trackr.xcodeproj/project.pbxproj
autonomous: true

must_haves:
  truths:
    - "UI strings display in Chinese (Simplified) when device language is zh-Hans"
    - "UI strings display in French when device language is fr"
    - "UI strings display in German when device language is de"
    - "UI strings display in Japanese when device language is ja"
    - "UI strings display in Portuguese when device language is pt-BR"
    - "UI strings display in Italian when device language is it"
    - "UI strings display in Korean when device language is ko"
    - "UI strings display in Russian when device language is ru"
  artifacts:
    - path: "W8Trackr/Localizable.xcstrings"
      provides: "All UI string translations for 8 languages"
      contains: '"zh-Hans"'
    - path: "W8Trackr.xcodeproj/project.pbxproj"
      provides: "Project knows about all 8 languages"
      contains: "knownRegions"
  key_links:
    - from: "SwiftUI Text() views"
      to: "W8Trackr/Localizable.xcstrings"
      via: "Automatic string localization"
      pattern: 'Text\\("'
---

<objective>
Add translations for all 8 target languages to the main app String Catalog.

Purpose: Enable users in Chinese, French, German, Japanese, Portuguese, Italian, Korean, and Russian locales to use W8Trackr in their native language (ZH-01, FR-01, DE-01, JA-01, PT-01, IT-01, KO-01, RU-01)
Output: Updated Localizable.xcstrings with 200 strings x 8 languages = 1600 new translations
</objective>

<execution_context>
@~/.claude/agents/gsd-executor.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/25-localization/25-01-SUMMARY.md
@W8Trackr/Localizable.xcstrings
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add 8 languages to project knownRegions</name>
  <files>W8Trackr.xcodeproj/project.pbxproj</files>
  <action>
Update the knownRegions array in project.pbxproj to include all 8 new language codes.

The knownRegions array should contain:
- Base, en, es (existing)
- zh-Hans (Chinese Simplified)
- fr (French)
- de (German)
- ja (Japanese)
- pt-BR (Portuguese Brazilian)
- it (Italian)
- ko (Korean)
- ru (Russian)

Find the existing knownRegions line and update it to include all languages.

Note: Use exact locale codes - zh-Hans not zh, pt-BR not pt.
  </action>
  <verify>
Build the project: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build 2>&1 | tail -5`
  </verify>
  <done>project.pbxproj contains all 8 new language codes in knownRegions array</done>
</task>

<task type="auto">
  <name>Task 2: Add all 8 language translations to Localizable.xcstrings</name>
  <files>W8Trackr/Localizable.xcstrings</files>
  <action>
Add translations for all 8 languages to every string in Localizable.xcstrings.

**Pattern to follow (from existing Spanish translations):**
For each string key that has an "es" localization, add 8 more localizations using the same structure:

```json
"localizations" : {
  "es" : { ... },  // existing
  "zh-Hans" : {
    "stringUnit" : {
      "state" : "translated",
      "value" : "[Chinese translation]"
    }
  },
  "fr" : { ... },
  "de" : { ... },
  "ja" : { ... },
  "pt-BR" : { ... },
  "it" : { ... },
  "ko" : { ... },
  "ru" : { ... }
}
```

**Translation Guidelines (from Phase 25 decisions):**
- Use formal form throughout (professional, respectful)
- Preserve brand name "W8Trackr" exactly
- Keep weight units (lb, kg) as international standards
- Preserve all format specifiers (%@, %1$@, %.1f, etc.) exactly
- AI translations acceptable for v1.2 (will iterate based on feedback)

**Key strings to translate carefully:**
- Navigation: "Summary", "Logbook", "Milestones", "Settings"
- Actions: "Add Entry", "Save", "Cancel", "Delete", "Edit"
- Stats: "Current Weight", "Goal Weight", "Progress", "Weekly Change"
- Onboarding: Welcome screens, permission requests
- Errors: "No data available", "Unable to save"

**Language-specific notes:**
- Chinese (zh-Hans): Use simplified characters, not traditional
- Japanese (ja): Use appropriate mix of kanji/hiragana/katakana
- Russian (ru): Use Cyrillic script
- Korean (ko): Use Hangul

Read the existing file to understand the full structure, then update it with all translations.
  </action>
  <verify>
1. Run localization tests: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -sdk iphonesimulator test -only-testing:W8TrackrTests/LocalizationTests 2>&1 | grep -E "(Test Case|passed|failed)"`
2. Verify file is valid JSON: `python3 -m json.tool W8Trackr/Localizable.xcstrings > /dev/null && echo "Valid JSON"`
3. Verify all 8 languages present: `grep -c '"zh-Hans"' W8Trackr/Localizable.xcstrings && grep -c '"ru"' W8Trackr/Localizable.xcstrings`
  </verify>
  <done>
- Localizable.xcstrings contains translations for zh-Hans, fr, de, ja, pt-BR, it, ko, ru
- All ~200 strings have translations in all 8 languages
- Format specifiers preserved correctly
- File builds without errors
  </done>
</task>

</tasks>

<verification>
1. Build succeeds: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build`
2. Localization tests pass: `xcodebuild test -only-testing:W8TrackrTests/LocalizationTests`
3. All 8 languages present in xcstrings file
4. No SwiftLint violations: `swiftlint lint --strict 2>&1 | grep -c "warning\|error" || echo "0"`
</verification>

<success_criteria>
- All ~200 UI strings translated to 8 new languages
- Project recognizes all 8 languages in knownRegions
- Build and localization tests pass
- Satisfies requirements: ZH-01, FR-01, DE-01, JA-01, PT-01, IT-01, KO-01, RU-01
</success_criteria>

<output>
After completion, create `.planning/phases/27-in-app-localization/27-01-SUMMARY.md`
</output>
