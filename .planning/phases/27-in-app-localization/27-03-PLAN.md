---
phase: 27-in-app-localization
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - W8Trackr/InfoPlist.xcstrings
  - W8Trackr/Intents/AppShortcuts.swift
autonomous: true

must_haves:
  truths:
    - "Permission dialogs display in Chinese when device language is zh-Hans"
    - "Permission dialogs display in French when device language is fr"
    - "Permission dialogs display in German when device language is de"
    - "Permission dialogs display in Japanese when device language is ja"
    - "Permission dialogs display in Portuguese when device language is pt-BR"
    - "Permission dialogs display in Italian when device language is it"
    - "Permission dialogs display in Korean when device language is ko"
    - "Permission dialogs display in Russian when device language is ru"
    - "Siri responds to phrases in all 8 languages"
  artifacts:
    - path: "W8Trackr/InfoPlist.xcstrings"
      provides: "Permission dialog translations for 8 languages"
      contains: '"zh-Hans"'
    - path: "W8Trackr/Intents/AppShortcuts.swift"
      provides: "Siri phrases in 8 languages"
      contains: "registrar peso"
  key_links:
    - from: "iOS permission system"
      to: "W8Trackr/InfoPlist.xcstrings"
      via: "Info.plist localization"
      pattern: "NSHealthShareUsageDescription"
---

<objective>
Add translations for all 8 target languages to InfoPlist.xcstrings and App Shortcuts Siri phrases.

Purpose: Enable system-level strings (permission dialogs, Siri) in Chinese, French, German, Japanese, Portuguese, Italian, Korean, and Russian
Output: Updated InfoPlist.xcstrings and AppShortcuts.swift with all 8 language translations
</objective>

<execution_context>
@~/.claude/agents/gsd-executor.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/25-localization/25-02-SUMMARY.md
@W8Trackr/InfoPlist.xcstrings
@W8Trackr/Intents/AppShortcuts.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add 8 language translations to InfoPlist.xcstrings</name>
  <files>W8Trackr/InfoPlist.xcstrings</files>
  <action>
Add translations for all 8 languages to every permission string in InfoPlist.xcstrings.

**Permission strings to translate:**
1. NSUserNotificationUsageDescription - "We need to send you notifications for daily weight logging reminders."
2. NSSiriUsageDescription - "W8Trackr uses Siri to quickly log your weight and check your progress."
3. NSHealthShareUsageDescription - "W8Trackr reads your weight data from Apple Health to help you track your progress."
4. NSHealthUpdateUsageDescription - "W8Trackr saves your weight and body fat entries to Apple Health so all your health data stays in one place."

**Pattern:**
```json
"NSHealthShareUsageDescription" : {
  "localizations" : {
    "en" : { ... },
    "es" : { ... },  // existing
    "zh-Hans" : {
      "stringUnit" : {
        "state" : "translated",
        "value" : "W8Trackr从Apple健康读取您的体重数据，帮助您追踪进度。"
      }
    },
    "fr" : { ... },
    "de" : { ... },
    "ja" : { ... },
    "pt-BR" : { ... },
    "it" : { ... },
    "ko" : { ... },
    "ru" : { ... }
  }
}
```

**Translation Guidelines:**
- Keep "W8Trackr" as-is (brand name)
- Translate "Apple Health" appropriately for each locale:
  - Chinese: Apple健康
  - Japanese: Appleヘルスケア
  - Korean: Apple 건강
  - Russian: Apple Здоровье
  - Others: Apple Health / Apple Santé (French) / Apple Salud (already in Spanish)
- Use formal tone for permission requests
- Preserve meaning accurately - these are legal/privacy disclosures
  </action>
  <verify>
1. Verify file is valid JSON: `python3 -m json.tool W8Trackr/InfoPlist.xcstrings > /dev/null && echo "Valid JSON"`
2. Verify all 8 languages present: `grep -c '"zh-Hans"' W8Trackr/InfoPlist.xcstrings && grep -c '"ru"' W8Trackr/InfoPlist.xcstrings`
3. Build: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build 2>&1 | tail -3`
  </verify>
  <done>
- InfoPlist.xcstrings contains translations for zh-Hans, fr, de, ja, pt-BR, it, ko, ru
- All 4 permission strings have translations in all 8 languages
- Build succeeds
  </done>
</task>

<task type="auto">
  <name>Task 2: Add Siri phrases in all 8 languages to AppShortcuts.swift</name>
  <files>W8Trackr/Intents/AppShortcuts.swift</files>
  <action>
Add Siri trigger phrases in all 8 languages to each App Shortcut.

**Existing shortcuts (from Phase 25):**
1. LogWeightIntent - "Log my weight", "Registrar mi peso" (Spanish)
2. CheckProgressIntent - "Check my progress", "Ver mi progreso"
3. GetTrendIntent - "What's my weight trend", "Cual es mi tendencia de peso"

**Add phrases for each shortcut in all 8 languages:**

For LogWeightIntent, add:
- Chinese: "记录我的体重"
- French: "Enregistrer mon poids"
- German: "Mein Gewicht protokollieren"
- Japanese: "体重を記録"
- Portuguese: "Registrar meu peso"
- Italian: "Registra il mio peso"
- Korean: "내 체중 기록"
- Russian: "Записать мой вес"

For CheckProgressIntent, add:
- Chinese: "查看我的进度"
- French: "Voir mes progrès"
- German: "Meinen Fortschritt anzeigen"
- Japanese: "進捗を確認"
- Portuguese: "Ver meu progresso"
- Italian: "Controlla i miei progressi"
- Korean: "내 진행 상황 확인"
- Russian: "Показать мой прогресс"

For GetTrendIntent, add:
- Chinese: "我的体重趋势是什么"
- French: "Quelle est ma tendance de poids"
- German: "Wie ist mein Gewichtstrend"
- Japanese: "体重の傾向は"
- Portuguese: "Qual é minha tendência de peso"
- Italian: "Qual è la mia tendenza di peso"
- Korean: "내 체중 추세는"
- Russian: "Какова моя тенденция веса"

Pattern in AppShortcuts.swift:
```swift
AppShortcut(
    intent: LogWeightIntent(),
    phrases: [
        "Log my weight in \(.applicationName)",
        "Registrar mi peso en \(.applicationName)",  // Spanish
        "记录我的体重在\(.applicationName)",           // Chinese
        "Enregistrer mon poids dans \(.applicationName)", // French
        // ... add all languages
    ],
    shortTitle: "Log Weight",
    systemImageName: "scalemass"
)
```

Note: Each phrase should include \(.applicationName) for proper Siri integration.
  </action>
  <verify>
1. Build succeeds: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build 2>&1 | tail -3`
2. Check phrases added: `grep -c "体重" W8Trackr/Intents/AppShortcuts.swift` (should be >= 3 for Chinese phrases)
3. SwiftLint passes: `cd /Users/will/Projects/Saults/W8Trackr && swiftlint lint W8Trackr/Intents/AppShortcuts.swift --strict 2>&1 | grep -c "error" || echo "0"`
  </verify>
  <done>
- AppShortcuts.swift contains Siri phrases in all 8 new languages
- Each of 3 shortcuts has phrases in en, es, zh-Hans, fr, de, ja, pt-BR, it, ko, ru
- Build succeeds without errors
  </done>
</task>

</tasks>

<verification>
1. Build succeeds: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build`
2. All 8 languages present in InfoPlist.xcstrings
3. All 8 languages have Siri phrases in AppShortcuts.swift
4. SwiftLint passes
</verification>

<success_criteria>
- All 4 permission strings translated to 8 new languages
- All 3 App Shortcuts have Siri phrases in 8 new languages
- Build succeeds
- Completes system-level localization for all 8 languages
</success_criteria>

<output>
After completion, create `.planning/phases/27-in-app-localization/27-03-SUMMARY.md`
</output>
