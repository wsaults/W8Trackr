---
phase: 05-light-dark-mode-support
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - W8Trackr/Views/Dashboard/DashboardView.swift
  - W8Trackr/Views/Dashboard/HeroCardView.swift
  - W8Trackr/Views/Dashboard/QuickStatsRow.swift
  - W8Trackr/Views/Onboarding/OnboardingView.swift
  - W8Trackr/Views/Onboarding/WelcomeStepView.swift
  - W8Trackr/Views/Onboarding/UnitPreferenceStepView.swift
  - W8Trackr/Views/Onboarding/GoalStepView.swift
  - W8Trackr/Views/Onboarding/FirstWeightStepView.swift
  - W8Trackr/Views/Onboarding/FeatureTourStepView.swift
  - W8Trackr/Views/Onboarding/CompletionStepView.swift
  - W8Trackr/Views/Goals/MilestoneProgressView.swift
  - W8Trackr/Views/Goals/MilestoneCelebrationView.swift
  - W8Trackr/Views/EmptyStateView.swift
  - W8Trackr/Views/Analytics/WeeklySummaryCard.swift
  - W8Trackr/Views/Analytics/WeeklySummaryView.swift
autonomous: true

must_haves:
  truths:
    - "App respects system appearance setting (light/dark)"
    - "All views render correctly in both light and dark modes"
    - "No hardcoded colors that break in opposite mode"
  artifacts:
    - path: "W8Trackr/Views/Dashboard/DashboardView.swift"
      provides: "Adaptive dashboard background"
      contains: "AppColors.background"
    - path: "W8Trackr/Views/Dashboard/HeroCardView.swift"
      provides: "Adaptive hero card colors"
      contains: "AppColors.success"
    - path: "W8Trackr/Views/Dashboard/QuickStatsRow.swift"
      provides: "Adaptive quick stats colors"
      contains: "AppColors.textPrimary"
    - path: "W8Trackr/Views/Onboarding/WelcomeStepView.swift"
      provides: "Adaptive onboarding button"
      contains: "AppColors.primary"
  key_links:
    - from: "All view files"
      to: "W8Trackr/Theme/Colors.swift"
      via: "AppColors enum usage"
      pattern: "AppColors\\.(primary|secondary|success|warning|background|surface|textPrimary)"
---

<objective>
Replace all hardcoded Color.X and AppColors.Fallback.X references with adaptive AppColors equivalents across Dashboard, Onboarding, Goals, and Analytics views.

Purpose: Ensure all UI elements adapt correctly to light and dark appearance modes without manual color scheme checks
Output: 15 view files using the established AppColors system for automatic light/dark adaptation
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-light-dark-mode-support/05-RESEARCH.md
@W8Trackr/Theme/Colors.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Dashboard views to AppColors</name>
  <files>
    W8Trackr/Views/Dashboard/DashboardView.swift
    W8Trackr/Views/Dashboard/HeroCardView.swift
    W8Trackr/Views/Dashboard/QuickStatsRow.swift
  </files>
  <action>
Replace AppColors.Fallback.X with AppColors.X equivalents:

**DashboardView.swift:**
- Line 116: `AppColors.Fallback.backgroundLight` -> `AppColors.background`
- Line 216: `AppColors.Fallback.primary.opacity(0.3)` -> `AppColors.primary.opacity(0.3)`

**HeroCardView.swift:**
- Line 45: `AppColors.Fallback.warning` -> `AppColors.warning`
- Line 46: `AppColors.Fallback.success` -> `AppColors.success`
- Line 47: `AppColors.Fallback.secondary` -> `AppColors.secondary`
- Line 109: `AppColors.Fallback.textPrimaryLight.opacity(0.8)` -> `AppColors.textSecondary`
- Line 158: `AppColors.Fallback.primary.opacity(0.3)` -> `AppColors.primary.opacity(0.3)`

**QuickStatsRow.swift:**
- Line 34: `AppColors.Fallback.warning` -> `AppColors.warning`, `AppColors.Fallback.secondary` -> `AppColors.secondary`
- Lines 40-42: Replace all `AppColors.Fallback.success/warning/secondary` -> `AppColors.success/warning/secondary`
- Line 56: `AppColors.Fallback.secondary` -> `AppColors.secondary`
- Line 61: `AppColors.Fallback.success/secondary` -> `AppColors.success/secondary`
- Line 92: `AppColors.Fallback.textPrimaryLight` -> `AppColors.textPrimary`
- Line 99: `AppColors.Fallback.textPrimaryLight.opacity(0.6)` -> `AppColors.textSecondary`
- Line 105: `AppColors.Fallback.textPrimaryLight.opacity(0.8)` -> `AppColors.textSecondary`
- Line 110: `AppColors.Fallback.surfaceLight` -> `AppColors.surface`
  </action>
  <verify>
Build succeeds: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build 2>&1 | grep -E "(error:|BUILD SUCCEEDED)"`
Grep confirms no Fallback usage: `grep -r "AppColors.Fallback" W8Trackr/Views/Dashboard/ | wc -l` returns 0
  </verify>
  <done>Dashboard views use adaptive AppColors - no Fallback references remain in Dashboard directory</done>
</task>

<task type="auto">
  <name>Task 2: Migrate Onboarding views to AppColors</name>
  <files>
    W8Trackr/Views/Onboarding/OnboardingView.swift
    W8Trackr/Views/Onboarding/WelcomeStepView.swift
    W8Trackr/Views/Onboarding/UnitPreferenceStepView.swift
    W8Trackr/Views/Onboarding/GoalStepView.swift
    W8Trackr/Views/Onboarding/FirstWeightStepView.swift
    W8Trackr/Views/Onboarding/FeatureTourStepView.swift
    W8Trackr/Views/Onboarding/CompletionStepView.swift
  </files>
  <action>
Replace hardcoded Color.X with AppColors equivalents:

**OnboardingView.swift:**
- Lines 94-95: `Color.blue.opacity(0.1), Color.purple.opacity(0.05)` -> `AppColors.primary.opacity(0.1), AppColors.accent.opacity(0.05)`
- Line 120: `Color.blue` -> `AppColors.primary`, `Color.gray.opacity(0.3)` -> `AppColors.surfaceSecondary`

**WelcomeStepView.swift:**
- Line 66: `.background(Color.blue)` -> `.background(AppColors.primary)`

**UnitPreferenceStepView.swift:**
- Line 70: `.background(Color.blue)` -> `.background(AppColors.primary)`
- Line 130: `Color.blue` -> `AppColors.primary`, `Color.blue.opacity(0.1)` -> `AppColors.primary.opacity(0.1)`
- Line 163: `Color.blue` -> `AppColors.primary`

**GoalStepView.swift:**
- Line 52: Keep `Color.primary` (semantic) and `Color.red` (semantic error color)
- Line 82: `Color.blue` -> `AppColors.primary`, `Color.gray` -> `AppColors.surfaceSecondary`

**FirstWeightStepView.swift:**
- Line 52: Keep `Color.primary` (semantic) and `Color.red` (semantic error color)
- Line 92: `Color.blue` -> `AppColors.primary`, `Color.gray` -> `AppColors.surfaceSecondary`

**FeatureTourStepView.swift:**
- Line 73: `Color.gray.opacity(0.3)` -> `AppColors.surfaceSecondary`
- Line 87: `.background(Color.blue)` -> `.background(AppColors.primary)`

**CompletionStepView.swift:**
- Line 25: `Color.green.opacity(0.15)` -> `AppColors.success.opacity(0.15)`
- Line 29: `Color.green` -> `AppColors.success`
- Line 62: `.background(Color.blue)` -> `.background(AppColors.primary)`
  </action>
  <verify>
Build succeeds: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build 2>&1 | grep -E "(error:|BUILD SUCCEEDED)"`
Grep confirms minimal hardcoded colors: `grep -E "Color\.(blue|gray|green)" W8Trackr/Views/Onboarding/ | grep -v "Color.primary\|Color.red" | wc -l` returns 0
  </verify>
  <done>Onboarding views use AppColors for buttons, backgrounds, and indicators - only semantic Color.primary/red remain for form validation</done>
</task>

<task type="auto">
  <name>Task 3: Migrate Goals, Analytics, and EmptyState views to AppColors</name>
  <files>
    W8Trackr/Views/Goals/MilestoneProgressView.swift
    W8Trackr/Views/Goals/MilestoneCelebrationView.swift
    W8Trackr/Views/EmptyStateView.swift
    W8Trackr/Views/Analytics/WeeklySummaryCard.swift
    W8Trackr/Views/Analytics/WeeklySummaryView.swift
  </files>
  <action>
Replace hardcoded Color.X with AppColors equivalents:

**MilestoneProgressView.swift:**
- Line 27: `Color.gray.opacity(0.2)` -> `AppColors.surfaceSecondary`
- Line 104: `Color.gray.opacity(0.2)` -> `AppColors.surfaceSecondary`
- Line 107: `Color.blue` -> `AppColors.primary`

**MilestoneCelebrationView.swift:**
- Line 23: `Color.black.opacity(0.4)` -> Keep as-is (overlay should be dark regardless of mode for modal dimming)

**EmptyStateView.swift:**
- Line 44: `.background(.blue)` -> `.background(AppColors.primary)`
- Line 70: `.fill(.blue.opacity(0.1))` -> `.fill(AppColors.primary.opacity(0.1))`
- Line 75: `.foregroundStyle(.blue.gradient)` -> `.foregroundStyle(AppColors.primary.gradient)`
- Line 79: `.foregroundStyle(.green)` -> `.foregroundStyle(AppColors.success)`
- Line 87: `.fill(.orange.opacity(0.1))` -> `.fill(AppColors.warning.opacity(0.1))`
- Line 92: `.foregroundStyle(.orange.gradient)` -> `.foregroundStyle(AppColors.warning.gradient)`
- Line 96: `.foregroundStyle(.blue)` -> `.foregroundStyle(AppColors.primary)`
- Line 104: `.fill(.purple.opacity(0.1))` -> `.fill(AppColors.accent.opacity(0.1))`
- Line 109: `.foregroundStyle(.purple.gradient)` -> `.foregroundStyle(AppColors.accent.gradient)`

**WeeklySummaryCard.swift:**
- Line 222: `Color.gray.opacity(0.1)` -> `AppColors.surfaceSecondary`

**WeeklySummaryView.swift:**
- Line 149: `Color.gray.opacity(0.1)` -> `AppColors.surfaceSecondary`
  </action>
  <verify>
Build succeeds: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build 2>&1 | grep -E "(error:|BUILD SUCCEEDED)"`
Grep confirms changes: `grep -E "Color\.(blue|gray|green|orange|purple)" W8Trackr/Views/Goals/ W8Trackr/Views/EmptyStateView.swift W8Trackr/Views/Analytics/ | wc -l` returns 0 or only MilestoneCelebrationView overlay
  </verify>
  <done>Goals, Analytics, and EmptyState views use AppColors for all UI elements - MilestoneCelebrationView keeps black overlay for modal dimming</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Build succeeds with no errors
2. `grep -r "AppColors.Fallback" W8Trackr/Views/` returns only AnimationModifiers.swift, ConfettiView.swift, SparkleView.swift (handled in Plan 02)
3. `grep -E "Color\.(blue|gray|green|orange|purple)" W8Trackr/Views/` returns minimal results (only intentional overlays and semantic validation colors)
4. SwiftLint passes: `swiftlint lint --quiet 2>&1 | wc -l` shows no new violations
</verification>

<success_criteria>
- All Dashboard views (DashboardView, HeroCardView, QuickStatsRow) use AppColors instead of AppColors.Fallback
- All Onboarding views use AppColors.primary instead of Color.blue for buttons
- All Goals views use AppColors for progress indicators
- EmptyStateView illustrations use AppColors for theme consistency
- Analytics views use AppColors.surfaceSecondary for backgrounds
- Build succeeds with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/05-light-dark-mode-support/05-01-SUMMARY.md`
</output>
