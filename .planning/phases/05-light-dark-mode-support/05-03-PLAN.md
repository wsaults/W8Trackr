---
phase: 05-light-dark-mode-support
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - W8Trackr/Views/SettingsView.swift
  - W8Trackr/Views/ToastView.swift
  - W8Trackr/Views/SummaryView.swift
  - W8Trackr/Views/WeightEntryView.swift
  - W8Trackr/Views/ExportView.swift
  - W8Trackr/Views/HistorySectionView.swift
  - W8Trackr/Views/Components/GoalPredictionView.swift
  - W8Trackr/Views/Components/GoalReachedBannerView.swift
  - W8Trackr/Views/Goals/MilestoneCelebrationView.swift
  - W8Trackr/Views/Analytics/WeeklySummaryCard.swift
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "All views render correctly in both light and dark modes"
    - "No hardcoded colors that break in opposite mode"
  artifacts:
    - path: "W8Trackr/Views/SettingsView.swift"
      provides: "Adaptive settings icons"
      contains: "AppColors.warning"
    - path: "W8Trackr/Views/ToastView.swift"
      provides: "Adaptive toast colors"
      contains: "AppColors.success"
    - path: "W8Trackr/Views/SummaryView.swift"
      provides: "Adaptive FAB button"
      contains: "AppColors.primary"
    - path: "W8Trackr/Views/WeightEntryView.swift"
      provides: "Adaptive entry form colors"
      contains: "AppColors.primary"
    - path: "W8Trackr/Views/Components/GoalPredictionView.swift"
      provides: "Adaptive prediction backgrounds"
      contains: "AppColors.success"
    - path: "W8Trackr/Views/Components/GoalReachedBannerView.swift"
      provides: "Adaptive goal banner"
      contains: "AppColors.success"
    - path: "W8Trackr/Views/Analytics/WeeklySummaryCard.swift"
      provides: "Adaptive trend colors"
      contains: "AppColors.success"
  key_links:
    - from: "All 10 view files"
      to: "W8Trackr/Theme/Colors.swift"
      via: "AppColors enum usage"
      pattern: "AppColors\\.(primary|success|warning|error|surfaceSecondary)"
---

<objective>
Migrate remaining 10 view files to AppColors system to close verification gaps.

Purpose: Complete light/dark mode support by eliminating all hardcoded colors that break in opposite appearance mode
Output: All view files using adaptive AppColors, enabling consistent appearance in both light and dark modes
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-light-dark-mode-support/05-VERIFICATION.md
@.planning/phases/05-light-dark-mode-support/05-01-SUMMARY.md
@W8Trackr/Theme/Colors.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Settings, Toast, Summary, and WeightEntry views</name>
  <files>
    W8Trackr/Views/SettingsView.swift
    W8Trackr/Views/ToastView.swift
    W8Trackr/Views/SummaryView.swift
    W8Trackr/Views/WeightEntryView.swift
  </files>
  <action>
Replace hardcoded colors with AppColors equivalents:

**SettingsView.swift:**
- Line 169: `.foregroundStyle(.orange)` -> `.foregroundStyle(AppColors.warning)` (warning triangle icon)
- Line 262: `.foregroundStyle(.yellow)` -> `.foregroundStyle(AppColors.warning)` (lightbulb icon)
- Line 345: `.foregroundStyle(.green)` -> `.foregroundStyle(AppColors.success)` (sync success checkmark)
- Line 377: `.foregroundStyle(.orange)` -> `.foregroundStyle(AppColors.warning)` (dev menu hammer icon)

**ToastView.swift:**
- Lines 20-22: Update ToastType.iconColor computed property:
  - `.success: return .green` -> `.success: return AppColors.success`
  - `.error: return .red` -> `.error: return AppColors.error`
  - `.info: return .blue` -> `.info: return AppColors.primary`
- Line 65: `.tint(type == .error ? .red : .blue)` -> `.tint(type == .error ? AppColors.error : AppColors.primary)`

**SummaryView.swift:**
- Line 107: `.background(.blue)` -> `.background(AppColors.primary)` (FAB button)
- Line 119: `.background(.gray.opacity(0.1))` -> `.background(AppColors.surfaceSecondary)` (view background)

**WeightEntryView.swift:**
- Line 22: `.foregroundStyle(.blue)` -> `.foregroundStyle(AppColors.primary)` (WeightAdjustButton)
- Line 194: `.tint(.blue)` -> `.tint(AppColors.primary)` (body fat toggle)
- Line 262: `.background(isFormValid ? .blue : .gray)` -> `.background(isFormValid ? AppColors.primary : AppColors.surfaceSecondary)` (save button)

Keep semantic colors:
- Color.primary (text) - standard SwiftUI semantic
- Color.red for validation errors - standard SwiftUI semantic
- Color(.systemGray6) - UIKit semantic for timestamp background
  </action>
  <verify>
Build succeeds: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build 2>&1 | grep -E "(error:|BUILD SUCCEEDED)"`
No hardcoded colors: `grep -E "^\s*\.(foregroundStyle|background|tint)\(\.?(blue|green|orange|yellow)\b" W8Trackr/Views/SettingsView.swift W8Trackr/Views/ToastView.swift W8Trackr/Views/SummaryView.swift W8Trackr/Views/WeightEntryView.swift | grep -v "Color.primary\|Color.red" | wc -l` returns 0
  </verify>
  <done>Settings, Toast, Summary, and WeightEntry views use AppColors for interactive elements - only semantic SwiftUI colors remain</done>
</task>

<task type="auto">
  <name>Task 2: Migrate Export, History, and Component views</name>
  <files>
    W8Trackr/Views/ExportView.swift
    W8Trackr/Views/HistorySectionView.swift
    W8Trackr/Views/Components/GoalPredictionView.swift
    W8Trackr/Views/Components/GoalReachedBannerView.swift
  </files>
  <action>
Replace hardcoded colors with AppColors equivalents:

**ExportView.swift:**
- Line 123: `.foregroundStyle(.orange)` -> `.foregroundStyle(AppColors.warning)` (warning triangle icon)

**HistorySectionView.swift:**
- Line 100: `.tint(.blue)` -> `.tint(AppColors.primary)` (edit swipe action)

**GoalPredictionView.swift:**
- Line 86: `.foregroundStyle(prediction.status.isPositive ? .green : .secondary)` -> `.foregroundStyle(prediction.status.isPositive ? AppColors.success : .secondary)` (status icon)
- Line 129-141: Update backgroundColor computed property:
  - `.green.opacity(0.1)` -> `AppColors.success.opacity(0.1)` (atGoal)
  - `.blue.opacity(0.1)` -> `AppColors.primary.opacity(0.1)` (onTrack)
  - `.orange.opacity(0.1)` -> `AppColors.warning.opacity(0.1)` (wrongDirection)
  - `.gray.opacity(0.1)` -> `AppColors.surfaceSecondary` (tooSlow)
  - `.gray.opacity(0.05)` -> `AppColors.surfaceSecondary.opacity(0.5)` (insufficientData, noData)
- Line 168: `.foregroundStyle(.green)` -> `.foregroundStyle(AppColors.success)` (days remaining text)
- Line 187: `.foregroundStyle(.green)` -> `.foregroundStyle(AppColors.success)` (congratulations text)
- Line 203: `.foregroundStyle(.orange)` -> `.foregroundStyle(AppColors.warning)` (wrong direction text)

**GoalReachedBannerView.swift:**
- Line 21: `.foregroundStyle(.green)` -> `.foregroundStyle(AppColors.success)` (checkmark icon)
- Line 34: `.background(.green.opacity(0.1))` -> `.background(AppColors.success.opacity(0.1))` (banner background)
  </action>
  <verify>
Build succeeds: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build 2>&1 | grep -E "(error:|BUILD SUCCEEDED)"`
No hardcoded colors in export/history: `grep -E "\.(blue|orange|green)\b" W8Trackr/Views/ExportView.swift W8Trackr/Views/HistorySectionView.swift | wc -l` returns 0
GoalPredictionView uses AppColors: `grep "AppColors" W8Trackr/Views/Components/GoalPredictionView.swift | wc -l` >= 6
  </verify>
  <done>Export, History, GoalPrediction, and GoalReachedBanner views use AppColors for status indicators and backgrounds</done>
</task>

<task type="auto">
  <name>Task 3: Migrate Milestone and WeeklySummary views</name>
  <files>
    W8Trackr/Views/Goals/MilestoneCelebrationView.swift
    W8Trackr/Views/Analytics/WeeklySummaryCard.swift
  </files>
  <action>
Replace hardcoded colors with AppColors equivalents:

**MilestoneCelebrationView.swift:**
- Line 56: `.foregroundStyle(.blue)` -> `.foregroundStyle(AppColors.primary)` (milestone weight display)
- Line 72: `.background(.blue)` -> `.background(AppColors.primary)` (Continue button)
- Line 191: `.foregroundStyle(.green)` -> `.foregroundStyle(AppColors.success)` (history checkmark icons)

Keep intentional non-adaptive colors:
- Line 23: Color.black.opacity(0.4) - modal overlay (intentionally dark in both modes)
- Line 40: .yellow - trophy icon (gold trophy should remain yellow)
- Line 120: confetti colors array [.red, .blue, .green, .yellow, .orange, .purple, .pink] - intentional variety for celebration effect

**WeeklySummaryCard.swift:**
- Lines 62-66: Update WeeklyTrend.color computed property:
  - `.up: return .orange` -> `.up: return AppColors.warning` (gained weight)
  - `.down: return .green` -> `.down: return AppColors.success` (lost weight)
  - `.stable: return .blue` -> `.stable: return AppColors.primary` (stable)
  </action>
  <verify>
Build succeeds: `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build 2>&1 | grep -E "(error:|BUILD SUCCEEDED)"`
MilestoneCelebrationView uses AppColors: `grep "AppColors" W8Trackr/Views/Goals/MilestoneCelebrationView.swift | wc -l` >= 3
WeeklyTrend colors migrated: `grep "AppColors" W8Trackr/Views/Analytics/WeeklySummaryCard.swift | wc -l` >= 3
Confetti colors preserved: `grep "colors.*\.red.*\.blue.*\.green" W8Trackr/Views/Goals/MilestoneCelebrationView.swift | wc -l` = 1
  </verify>
  <done>MilestoneCelebration and WeeklySummaryCard use AppColors - celebration confetti colors intentionally preserved for variety</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Build succeeds with no errors
2. Full codebase scan: `grep -rE "^\s*\.(foregroundStyle|background|tint)\(\.?(blue|green|orange)\b" W8Trackr/Views/ | grep -v "Color.primary\|Color.red\|//.*\." | grep -v "ConfettiView\|MilestoneConfettiView" | wc -l` returns minimal results (only intentional cases)
3. All 10 files now use AppColors: `grep -l "AppColors" W8Trackr/Views/SettingsView.swift W8Trackr/Views/ToastView.swift W8Trackr/Views/SummaryView.swift W8Trackr/Views/WeightEntryView.swift W8Trackr/Views/ExportView.swift W8Trackr/Views/HistorySectionView.swift W8Trackr/Views/Components/GoalPredictionView.swift W8Trackr/Views/Components/GoalReachedBannerView.swift W8Trackr/Views/Goals/MilestoneCelebrationView.swift W8Trackr/Views/Analytics/WeeklySummaryCard.swift | wc -l` returns 10
4. SwiftLint passes: `swiftlint lint --quiet 2>&1 | wc -l` shows no new violations
</verification>

<success_criteria>
- SettingsView uses AppColors.warning/success for status icons
- ToastView uses AppColors.success/error/primary for toast type colors
- SummaryView FAB button uses AppColors.primary
- WeightEntryView buttons use AppColors.primary for enabled state
- ExportView warning icon uses AppColors.warning
- HistorySectionView edit swipe uses AppColors.primary
- GoalPredictionView backgrounds use AppColors for all status types
- GoalReachedBannerView uses AppColors.success for green theme
- MilestoneCelebrationView uses AppColors.primary for buttons (confetti colors preserved)
- WeeklySummaryCard trend colors use AppColors.warning/success/primary
- Build succeeds with no errors
- Verification gaps from 05-VERIFICATION.md are closed
</success_criteria>

<output>
After completion, create `.planning/phases/05-light-dark-mode-support/05-03-SUMMARY.md`
</output>
