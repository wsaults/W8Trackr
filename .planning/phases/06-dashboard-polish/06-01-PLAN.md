---
phase: 06-dashboard-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - W8Trackr/Views/ChartSectionView.swift
  - W8Trackr/Views/Dashboard/HeroCardView.swift
  - W8Trackr/Views/Dashboard/DashboardView.swift
  - W8Trackr/Views/Components/GoalPredictionView.swift
  - W8Trackr/Theme/Gradients.swift
autonomous: true

must_haves:
  truths:
    - "Chart segmented control shows 1W, 1M, 3M, 6M, 1Y, All"
    - "Current Weight text is clearly readable on gradient backgrounds"
    - "HeroCard shows green gradient when losing weight"
    - "HeroCard shows amber gradient when gaining weight"
    - "GoalPredictionView takes full width of container"
    - "FAB button is right-aligned at bottom of dashboard"
  artifacts:
    - path: "W8Trackr/Views/ChartSectionView.swift"
      provides: "Month-based date range labels"
      contains: "oneWeek.*1W"
    - path: "W8Trackr/Views/Dashboard/HeroCardView.swift"
      provides: "Trend-based gradient and readable text"
      contains: "trendGradient"
    - path: "W8Trackr/Theme/Gradients.swift"
      provides: "Warning gradient for gaining weight"
      contains: "static let warning"
    - path: "W8Trackr/Views/Dashboard/DashboardView.swift"
      provides: "Right-aligned FAB"
      contains: "bottomTrailing"
  key_links:
    - from: "HeroCardView.swift"
      to: "Gradients.swift"
      via: "AppGradients.success/warning/primary"
      pattern: "AppGradients\\.(success|warning|primary)"
---

<objective>
Polish dashboard card layouts and styling for better visual consistency.

Purpose: Improve visual feedback and usability of the dashboard - trend-based colors give instant feedback, month labels are more intuitive than day counts, FAB placement follows standard mobile patterns.

Output: Polished dashboard with trend-based hero card colors, readable text, month-based chart labels, full-width prediction card, and right-aligned FAB.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-dashboard-polish/06-RESEARCH.md

# Key source files
@W8Trackr/Theme/Gradients.swift
@W8Trackr/Theme/Colors.swift
@W8Trackr/Views/ChartSectionView.swift
@W8Trackr/Views/Dashboard/HeroCardView.swift
@W8Trackr/Views/Dashboard/DashboardView.swift
@W8Trackr/Views/Components/GoalPredictionView.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update chart date range labels to month format</name>
  <files>W8Trackr/Views/ChartSectionView.swift</files>
  <action>
Update the DateRange enum to use month-based labels instead of day-based:

1. Rename enum cases and their rawValues:
   - `sevenDay = "7D"` -> `oneWeek = "1W"`
   - `thirtyDay = "30D"` -> `oneMonth = "1M"`
   - `ninetyDay = "90D"` -> `threeMonth = "3M"`
   - `oneEightyDay = "180D"` -> `sixMonth = "6M"`
   - Keep `oneYear = "1Y"` and `allTime = "All"` unchanged

2. Update the `days` computed property switch cases to match new case names:
   - `.oneWeek: return 7`
   - `.oneMonth: return 30`
   - `.threeMonth: return 90`
   - `.sixMonth: return 180`
   - Keep `.oneYear: return 365` and `.allTime: return nil`

3. Update the `@State private var selectedRange` default value from `.sevenDay` to `.oneWeek`

Keep the Picker implementation unchanged - it uses rawValue which will automatically pick up new labels.
  </action>
  <verify>Build succeeds with `xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build 2>&1 | tail -5`</verify>
  <done>Segmented control displays "1W | 1M | 3M | 6M | 1Y | All" instead of day-based labels</done>
</task>

<task type="auto">
  <name>Task 2: Fix HeroCard text and add trend-based gradient</name>
  <files>
    W8Trackr/Theme/Gradients.swift
    W8Trackr/Views/Dashboard/HeroCardView.swift
  </files>
  <action>
**Part A: Add warning gradient to Gradients.swift**

Add a warning gradient after the success gradient (around line 53), before the Background Gradients section:

```swift
/// Warning gradient - weight gain, needs attention states
static let warning = LinearGradient(
    colors: [Color(hex: "#F39C12"), Color(hex: "#E67E22")],
    startPoint: .topLeading,
    endPoint: .bottomTrailing
)
```

**Part B: Update HeroCardView.swift**

1. Fix "Current Weight" text readability (line 109):
   - Change `.foregroundStyle(AppColors.textSecondary)` to `.foregroundStyle(.white.opacity(0.9))`

2. Add computed property for trend-based gradient (add after the `accessibilityDescription` computed property, around line 101):

```swift
private var trendGradient: LinearGradient {
    switch trendDirection {
    case .down:
        return AppGradients.success  // Green - losing weight
    case .up:
        return AppGradients.warning  // Amber - gaining weight
    case .neutral:
        return AppGradients.primary  // Coral - maintaining
    }
}
```

3. Update the background (line 156):
   - Change `.background(AppGradients.primary)` to `.background(trendGradient)`

4. Update the shadow color to be dynamic based on trend (line 158):
   - Change `.shadow(color: AppColors.primary.opacity(0.3), ...)` to:
   ```swift
   .shadow(color: (trendDirection == .down ? AppColors.success : trendDirection == .up ? AppColors.warning : AppColors.primary).opacity(0.3), radius: 10, x: 0, y: 5)
   ```
  </action>
  <verify>Build succeeds and preview shows: green card with -2.3 change (Losing Weight preview), amber card with +0.8 change (Gaining Weight preview)</verify>
  <done>"Current Weight" text is readable on all gradient backgrounds; HeroCard shows green gradient when losing weight, amber when gaining</done>
</task>

<task type="auto">
  <name>Task 3: GoalPredictionView full width and FAB right alignment</name>
  <files>
    W8Trackr/Views/Components/GoalPredictionView.swift
    W8Trackr/Views/Dashboard/DashboardView.swift
  </files>
  <action>
**Part A: GoalPredictionView full width (GoalPredictionView.swift)**

Update the body view (around line 109) to ensure full width:

1. After `.clipShape(RoundedRectangle(cornerRadius: 12))` add:
   ```swift
   .frame(maxWidth: .infinity, alignment: .leading)
   ```

This ensures the card takes full available width even with varying content.

**Part B: FAB right alignment (DashboardView.swift)**

1. Change ZStack alignment (line 91):
   - From: `ZStack(alignment: .bottom)`
   - To: `ZStack(alignment: .bottomTrailing)`

2. Update FAB padding (line 100):
   - From: `.padding(.bottom)`
   - To:
   ```swift
   .padding(.trailing)
   .padding(.bottom)
   ```

This places the FAB in the bottom-right corner following standard mobile FAB placement.
  </action>
  <verify>Build succeeds; run in simulator to confirm FAB is right-aligned and GoalPredictionView fills width</verify>
  <done>FAB appears at bottom-right of dashboard; GoalPredictionView takes full container width</done>
</task>

</tasks>

<verification>
After all tasks:

1. Build verification:
   ```bash
   xcodebuild -project W8Trackr.xcodeproj -scheme W8Trackr -configuration Debug -sdk iphonesimulator build 2>&1 | grep -E "(BUILD|error:|warning:)" | tail -10
   ```

2. SwiftLint check:
   ```bash
   cd /Users/will/Projects/Saults/W8Trackr && swiftlint lint --quiet 2>&1 | head -20
   ```

3. Visual verification (via previews or simulator):
   - ChartSectionView shows "1W | 1M | 3M | 6M | 1Y | All"
   - HeroCardView "Losing Weight" preview shows GREEN gradient
   - HeroCardView "Gaining Weight" preview shows AMBER gradient
   - "Current Weight" label is clearly visible (white on colored background)
   - FAB is right-aligned at bottom of dashboard
   - GoalPredictionView fills container width
</verification>

<success_criteria>
- [ ] DateRange enum uses month labels (1W, 1M, 3M, 6M, 1Y, All)
- [ ] "Current Weight" text uses white.opacity(0.9) for readability
- [ ] HeroCard background is green (AppGradients.success) when losing weight
- [ ] HeroCard background is amber (AppGradients.warning) when gaining weight
- [ ] HeroCard background is coral (AppGradients.primary) when neutral
- [ ] AppGradients.warning is defined in Gradients.swift
- [ ] GoalPredictionView has .frame(maxWidth: .infinity)
- [ ] DashboardView ZStack uses .bottomTrailing alignment
- [ ] FAB has .padding(.trailing) and .padding(.bottom)
- [ ] Build succeeds with zero errors
- [ ] SwiftLint passes with zero violations
</success_criteria>

<output>
After completion, create `.planning/phases/06-dashboard-polish/06-01-SUMMARY.md`
</output>
